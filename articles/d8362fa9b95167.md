---
title: "Flutter でアプリを新規開発してみて"
emoji: "💬"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Flutter"]
published: false
---

この記事は[株式会社TORICO Advent Calendar 2021](https://qiita.com/advent-calendar/2021/torico) の17日目の記事です。

10日の記事は思った以上に読んで頂けているようで書いた会がありました。
ありがとうございます。


はじめまして。
株式会社TORICO でモバイルアプリエンジニアをしている[0maru](https://twitter.com/0maru_dev) です。
今回は弊社の主要事業である[漫画全巻ドットコム](https://www.mangazenkan.com/) のモバイルアプリをFlutter で開発したことについて書いていきます。


## はじめに

弊社では４つのモバイルアプリがリリースされており、その全てがFlutter で開発されています。
Git のコミットを遡ってみると初めてのコミットは2019年1月でした。
Flutter の1.0 がリリースされたのが2018年12月なのでバージョン 1.0 が出た頃にはFlutter を採用を開始していますので、比較的Flutter の採用が早かった会社ではないでしょうか。
今回開発したのは弊社の主要事業である漫画全巻ドットコムのモバイルアプリです。
漫画全巻ドットコムとはサービス名の通り、鬼滅の刃なら1~23巻の23巻セットで、ワンピースなら1~101巻の101巻セットでまとめ買いができるサービスです。
漫画全巻ドットコムでは受注から出荷までワンストップで行われており、漫画は東京の本社に併設されている倉庫から発送されています。
今回は本サービスの紙の漫画を販売するアプリを開発したことについて書いていきます。
また、本サービスでは電子書籍も取り扱っており、電子書籍のリーダーアプリもFlutter で開発しリリースしていますが今回は触れません。
もしかするともうひとりのアプリエンジニアがアドベントカレンダーで書いてくれるかもしれないので良かったら[株式会社TORICO Advent Calendar 2021](https://qiita.com/advent-calendar/2021/torico) をウォッチして頂けますと幸いです。

## アプリについて
サンプルコードは少なめです。
CI/CD, マルチパッケージ、Flutter のバージョン管理に関しては[約3年間Flutter で開発してきてのあれやこれや](https://zenn.dev/0maru/articles/262c0f8ad52a0d) を確認してください。


### アプリの構成について

まず、状態管理で使用しているパッケージはProvider です。
StateNotifierを組み合わせて[Provider](https://pub.dev/packages/provider) + [StateNotifier](https://pub.dev/packages/state_notifier) + [freezed](https://pub.dev/packages/freezed) で開発しています。
Provider を選択した理由としてはアプリ開発専任のメンバーが居るわけではなく、色々なメンバーが開発する可能性があったため情報も多く、他のアプリでも採用しているという理由でProvider を選択しました。
1ページ、１コントローラーなページがほとんどですが、コントローラーに処理が多くなると適切に切り分け１ページ、Xコントローラーになっています。
また、

### 決済方法について

このアプリでは実物の漫画を販売しているためアプリ内課金ではなく、クレジットカード決済やAmazonPay、auかんたん決済などの支払い方法を導入しています。
Web版でも同じ決済方法を導入しているため、アプリではSDKを使用せず、Web版と同じRestful APIを使用したAPIベースで実装しています。
実装方法に関しては長くなるので今回は省きますが、一つのソースコードでiOS、Androidの実装が出来るのはやはりクロスプラットフォームのメリットですね！