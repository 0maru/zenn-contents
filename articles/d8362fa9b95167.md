---
title: "Flutter ã§ECã‚¢ãƒ—ãƒªã‚’æ–°è¦é–‹ç™ºã—ã¦ã¿ã¦"
emoji: "ğŸ¦–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Flutter"]
published: false
---

ã“ã®è¨˜äº‹ã¯[æ ªå¼ä¼šç¤¾TORICO Advent Calendar 2021](https://qiita.com/advent-calendar/2021/torico) ã®17æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚

-----

:::message
ã“ã®è¨˜äº‹ã§ã¯Flutter 2.8, Dart 2.15 ã‚’å¯¾è±¡ã¨ã—ã¦ã„ã¾ã™ã€‚
:::

ã¯ã˜ã‚ã¾ã—ã¦ã€‚

æ ªå¼ä¼šç¤¾TORICO ã§ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ã—ã¦ã„ã‚‹[0maru](https://twitter.com/0maru_dev) ã§ã™ã€‚
ä»Šå›ã¯ECã‚¢ãƒ—ãƒªã‚’Flutter ã§é–‹ç™ºã—ãŸã“ã¨ã«ã¤ã„ã¦ãŠè©±ã—ãŸã„ã¨ãŠã‚‚ã„ã¾ã™ã€‚

# ã¯ã˜ã‚ã«

å¼Šç¤¾ã§ã¯ï¼”ã¤ã®ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ãŠã‚Šã€ãã®å…¨ã¦ãŒFlutter ã§é–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ã€‚
Git ã®ã‚³ãƒŸãƒƒãƒˆã‚’é¡ã£ã¦ã¿ã‚‹ã¨åˆã‚ã¦ã®ã‚³ãƒŸãƒƒãƒˆã¯2019å¹´1æœˆã§ã—ãŸã€‚
Flutter ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³1.0 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã®ãŒ2018å¹´12æœˆãªã®ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.0 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã™ãã«Flutter ã‚’ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã«æ¡ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€å¼Šç¤¾ã¯æ¯”è¼ƒçš„Flutter ã®æ¡ç”¨ãŒæ—©ã‹ã£ãŸä¼šç¤¾ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚

ä»Šå›é–‹ç™ºã—ãŸã®ã¯å¼Šç¤¾ã®ä¸»è¦äº‹æ¥­ã§ã‚ã‚‹æ¼«ç”»å…¨å·»ãƒ‰ãƒƒãƒˆã‚³ãƒ ã®ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã§ã™ã€‚
æ¼«ç”»å…¨å·»ãƒ‰ãƒƒãƒˆã‚³ãƒ ã¨ã¯ECã‚µã‚¤ãƒˆã§é¬¼æ»…ã®åˆƒãªã‚‰1~23å·»ã®23å·»ã‚»ãƒƒãƒˆã§ã€ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹ãªã‚‰1~101å·»ã®101å·»ã‚»ãƒƒãƒˆã§å…¨å·»ã‚’ã¾ã¨ã‚è²·ã„ãŒã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚
æ¼«ç”»å…¨å·»ãƒ‰ãƒƒãƒˆã‚³ãƒ ã§ã¯å—æ³¨ã‹ã‚‰å‡ºè·ã¾ã§ãƒ¯ãƒ³ã‚¹ãƒˆãƒƒãƒ—ã§è¡Œã‚ã‚Œã¦ãŠã‚Šã€æ¼«ç”»ã¯æ±äº¬ã®æœ¬ç¤¾ã«ä½µè¨­ã•ã‚Œã¦ã„ã‚‹å€‰åº«ã‹ã‚‰ç™ºé€ã•ã‚Œã¦ã„ã¾ã™ã€‚
ä»Šå›ã¯æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®ç´™ã®æ¼«ç”»ã‚’è³¼å…¥ã§ãã‚‹ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºã—ãŸã“ã¨ã«ã¤ã„ã¦ãŠè©±ã—ã¾ã™ã€‚

ã¾ãŸæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯é›»å­æ›¸ç±ã‚‚å–ã‚Šæ‰±ã£ã¦ãŠã‚Šã€é›»å­æ›¸ç±ã®ãƒªãƒ¼ãƒ€ãƒ¼ã‚¢ãƒ—ãƒªã‚‚Flutter ã§é–‹ç™ºã—ãƒªãƒªãƒ¼ã‚¹ã—ã¦ã„ã¾ã™ãŒä»Šå›ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚
ã‚‚ã—ã‹ã™ã‚‹ã¨ã‚‚ã†ã²ã¨ã‚Šã®ã‚¢ãƒ—ãƒªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§æ›¸ã„ã¦ãã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã®ã§è‰¯ã‹ã£ãŸã‚‰[æ ªå¼ä¼šç¤¾TORICO Advent Calendar 2021](https://qiita.com/advent-calendar/2021/torico) ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã¿ã¦ãã ã•ã„ï¼

# ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦

ä»Šå›ã®è¨˜äº‹ã§ã¯ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯å°‘ãªã‚ã§ã™ã€‚
CI/CD, ãƒãƒ«ãƒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€Flutter ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã«é–¢ã—ã¦ã¯åˆ¥ã§è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã¾ã™ã®ã§ã€[ç´„3å¹´é–“Flutter ã§é–‹ç™ºã—ã¦ãã¦ã®ã‚ã‚Œã‚„ã“ã‚Œã‚„](https://zenn.dev/0maru/articles/262c0f8ad52a0d) ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
ã¾ã å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ã‚’æ»ã„æ‘˜ã‚“ã§æ²è¼‰ã—ã¦ã‚‹ç‚ºã€å¤šå°‘ãŠã‹ã—ã„ã¨æ„Ÿã˜ã‚‹ç®‡æ‰€ãŒã‚ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ãŒã”äº†æ‰¿ãã ã•ã„ã€‚

## Flutter ã‚’æ¡ç”¨ã—ãŸç†ç”±

ã“ã®ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºã™ã‚‹ã¨ã„ã†è©±ã‚’èã„ãŸã¨ãã«ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã¨ã—ã¦ä½œã‚‹è©±ã¯å…¨ãå‡ºã¦ã“ãªã‹ã£ãŸã¨è¨˜æ†¶ã—ã¦ã„ã¾ã™ã€‚CTOã‹ã‚‰é–‹ç™ºã®è©±ã‚’èã„ãŸã¨ãã«ã¯ã‚‚ã¡ã‚ã‚“Flutter ã ã‚ˆã­ï¼ã¨ã„ã£ãŸæ„Ÿã˜ã§è©±ãŒé€²ã‚“ã§ã„ãŸã¯ãšã§ã™ã€‚

ä¸Šã§ã‚‚è¿°ã¹ã¾ã—ãŸãŒã€ã“ã®ã‚¢ãƒ—ãƒªã®é–‹ç™ºãŒæ±ºå®šã™ã‚‹ã¾ã§ã«ã™ã§ã«Flutter è£½ã®ã‚¢ãƒ—ãƒªãŒ3ã¤ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ãŸãŸã‚ç§è‡ªèº«ã‚‚Flutter ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã«ä¸å®‰ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
ã¾ãŸECã‚¢ãƒ—ãƒªã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€OSå›ºæœ‰ã®æ©Ÿèƒ½ï¼ˆLiDARã‚¹ã‚­ãƒ£ãƒŠã‚„ã‚»ãƒ³ã‚µãƒ¼ãªã©ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ãªãã€Flutter(Dart) ã§æ©Ÿèƒ½è¦ä»¶ã‚’æº€ãŸã›ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã‚‚Flutter ã‚’æ¡ç”¨ã™ã‚‹æ±ºã‚æ‰‹ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚

## ã‚¢ãƒ—ãƒªã®æ§‹æˆã«ã¤ã„ã¦

ã“ã®ã‚¢ãƒ—ãƒªã¯Firebase ãªã©ã®mBaas ãªã©ã§ä½œã£ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªãã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã¯Python ã¨PHP ã§å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€WebAPIã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
HttpClient ã¯[`dio`](https://pub.dev/packages/dio) ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€[`json_serializable`](https://pub.dev/packages/json_serializable) ã§JSON ã‚’ã‚¯ãƒ©ã‚¹ã«å¤‰æ›ã—ã¦ã„ã¾ã™ã€‚

Firebaseã§ä½œã£ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã¨æ›¸ãã¾ã—ãŸãŒã€Firebaseã‚’å…¨ãä½¿ã£ã¦ã„ãªã„ã‚ã‘ã§ã¯ãªãã¦ã€FCMã‚„Analyticsã€In-App Messaging,ã€RemoteConfig ãªã©ã¯ã‚‚ã¡ã‚ã‚“åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚

### çŠ¶æ…‹ç®¡ç†ã«ã¤ã„ã¦

Flutter ã®è¨˜äº‹ã‚’è¦‹ã¦ã„ã‚‹ã¨ã¾ã ã¾ã çŠ¶æ…‹ç®¡ç†ã«ã¤ã„ã¦ã®è¨˜äº‹ãŒå¤šãã€ã“ã®è¨˜äº‹ã‚’èª­ã‚“ã§ã„ã‚‹æ–¹ã‚‚ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã©ã®çŠ¶æ…‹ç®¡ç†ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã‹ã¨æ°—ã«ãªã£ã¦ã„ã‚‹æ–¹ãŒå¤šã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ


Provider ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€StateNotifierã‚’çµ„ã¿åˆã‚ã›ã¦[`Provider`](https://pub.dev/packages/provider) + [`StateNotifier`](https://pub.dev/packages/state_notifier) + [`freezed`](https://pub.dev/packages/freezed) ã§é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚
Riverpod ã®è¨˜äº‹ã‚’èª­ã‚ã‚‹ã¨æœŸå¾…ã•ã‚Œã¦ã„ãŸæ–¹ã¯ã™ã¿ã¾ã›ã‚“...

Provider ã‚’æ¡ç”¨ã—ãŸç†ç”±ã¤ã„ã¦ã§ã™ãŒã€ã“ã®ã‚¢ãƒ—ãƒªã®é–‹ç™ºåˆæœŸæ®µéšã§ã™ã§ã«`Riverpod v0.8.0` ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ãŠã‚Šã€Riverpod ã‚’é¸æŠã™ã‚‹ã¨ã„ã†ã“ã¨ã‚‚å¯èƒ½ã§ã—ãŸã€‚
ã—ã‹ã—ã€é–‹ç™ºãƒãƒ¼ãƒ å†…ã«ã‚¢ãƒ—ãƒªã®é–‹ç™ºã ã‘ã‚’è¡Œã†å°‚ä»»ã®ãƒ¡ãƒ³ãƒãƒ¼ãŒå±…ã‚‹ã‚ã‘ã§ã¯ãªãã€è‰²ã€…ãªãƒ¡ãƒ³ãƒãƒ¼ãŒé–‹ç™ºã™ã‚‹å¯èƒ½æ€§ãŒã‚ã£ãŸãŸã‚æƒ…å ±ã‚‚å¤šãã€å¼Šç¤¾ã®ä»–ã®ã‚¢ãƒ—ãƒªã§ã‚‚ä½¿ã‚ã‚Œã¦ã„ã‚‹ã¨ã„ã†ç†ç”±ã§Provider ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚

Provider ã®ä½¿ã„æ–¹ã¨ã—ã¦ã¯ã”ãæ™®é€šã®ä½¿ã„æ–¹ã§ã€1ãƒšãƒ¼ã‚¸ã€ï¼‘ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ï¼ˆProviderï¼‰ ãªãƒšãƒ¼ã‚¸ãŒã»ã¨ã‚“ã©ã§ã™ã€‚ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã«å‡¦ç†ãŒå¤šããªã‚‹ã¨é©åˆ‡ã«åˆ‡ã‚Šåˆ†ã‘ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®æ•°ãŒ1 + Î± ã«ãªã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚

### è¨­è¨ˆã«ã¤ã„ã¦
ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã—ã¦ã¯Repository ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚
ã»ã¨ã‚“ã©ã®å‡¦ç†ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã«å¯„ã›ã¦ã„ã‚‹ã®ã§ã€ã‚¢ãƒ—ãƒªã§ã¯æœ€ä½é™ã®å‡¦ç†ã—ã‹è¡Œã‚ãªã„ã®ã§æœ€ä½é™ç§©åºã‚’ä¿ã¡ã¤ã¤é–‹ç™ºé€Ÿåº¦ãªã©ã‚’è€ƒæ…®ã—ã¦Repositoryãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚

ãƒªãƒã‚¸ãƒˆãƒªã®æ‰±ã„æ–¹ã§ã™ãŒã€å…¨ã¦ã®ãƒªãƒã‚¸ãƒˆãƒªã¯Povider ã§æä¾›ã—ã¦ãŠã‚Šã€ãƒ„ãƒªãƒ¼ã®ä¸‹éƒ¨ã«ã‚ã‚‹Service ã‚„Controller ã‹ã‚‰ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
ãƒªãƒã‚¸ãƒˆãƒªã‚’ãªãœProvider ã§æä¾›ã—ã¦ã„ã‚‹ã‹ã¨ã„ã†ã¨ã€ç†ç”±ã¯DI ã§ä¾å­˜æ€§ã®æ³¨å…¥ã‚’ã—ãŸã‹ã£ãŸã‹ã‚‰ã§ã™ã€‚


```dart
// Provider ã§ãƒªãƒã‚¸ãƒˆãƒªã‚’æä¾›ã™ã‚‹
return MultiProvider(
  providers: [
    Provider(create: (_) => UserRepository()),
    Provider(create: (_) => PaymentRepository()),
    ...
  ],
  child: ...
);
```

ã•ã‚‰ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã§ã¯`LocatorMixin` ã‚’Mixin ã—ã¦ã„ã‚‹ã®ã§ã€contextã‚„context.read ã‚’ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®å¼•æ•°ã«ã—ãªãã¦ã‚‚ä½¿ç”¨ã§ãã¾ã™ã€‚
ãŸã contextãŒä¸è¦ã¨ã„ã†è¨³ã§ã¯ãªãã¦ã€å®Ÿéš›ã¯`LocatorMixin` ãŒãã®å½¹ç›®ã‚’ä»£æ›¿ã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚

```dart
class ProfileController extendsas StateNotifier<ProfileState> with LocatorMixin {
  ProfileController() : super(const ProfileState());
  
  // UserRepository get userRepository => context.read(); ã¨ãŠãªã˜
  UserRepository get userRepository => read();

  @override
  void initState() {
    super.initState();
    fetch();
  }

  Future<void> fetch() async {
    final result = await userRepository.get();
    state = state.copyWith(...);
  }
}

```

å°‘ã—é“ãŒãã‚Œã¾ã™ãŒã€`LocatorMixin`ã«ã¯[`debugMockDependency`](https://pub.dev/documentation/state_notifier/latest/state_notifier/LocatorMixin/debugMockDependency.html) ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã€`debugMockDependency` ã‚’ä½¿ç”¨ã™ã‚‹ã¨ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã®å ´åˆã€ `UserRepository` ã‚’ãƒ¢ãƒƒã‚¯ã®`MockUserRepository` ã«å·®ã—æ›¿ãˆã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ã“ã®æ©Ÿèƒ½ãŒã‚ã‚‹ãŠã‹ã’ã§ãƒ†ã‚¹ãƒˆã®éš›ã«ã€Controller ãŒä¾å­˜ã—ã¦ã„ã‚‹Repository(APIé€šä¿¡ãªã©ãŒã‚ã‚Šã‚¢ãƒ—ãƒªå†…ã§å‡¦ç†ãŒå®Œçµã—ãªã„) ã‚’ãƒ¢ãƒƒã‚¯ã«å¤‰ãˆã¦ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã“ã¨ãŒã§ãã‚‹ã¨ã„ã£ãŸãƒ¡ãƒªãƒƒãƒˆã‚‚ã‚ã‚Šã¾ã™ã€‚


### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒªæ§‹æˆã«ã¤ã„ã¦

ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
èª°ã‹ã¨ç›¸è«‡ã—ã¦æ±ºã‚ãŸã‚ã‘ã§ã¯ãªãã€é–‹ç™ºã‚’é€²ã‚ã¦ã„ã¦æ¢ã‚Šæ¢ã‚Šåˆ†å‰²ã—ã¦ã„ã‚‹ã¨ã“ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚Flutter ã®å…¬å¼ã‹ã‚‰ãŠã™ã™ã‚ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªæ§‹æˆã¯ãªãã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚‹ã¨æ€ã†ã®ã§å‚è€ƒç¨‹åº¦ã«è¦‹ã¦ãã ã•ã„ã€‚

```
app/
  scripts/  # Dart ã§æ›¸ã‹ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆ
  packages/
    commons/  # ç¤¾å†…ã®å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒª
    app/  # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
      lib/
        controller/  # å„ãƒšãƒ¼ã‚¸ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼(StateNotifier)ã¨freezed ã§æ›¸ã‹ã‚ŒãŸãƒ¢ãƒ‡ãƒ«
          mypage/ 
            mypage_controller.dart
            mypage_state.dart
            mypage_state.freezed.dart
        models/
          user/
            user.dart
            user.freezed.dart
            user.g.dart
        pages/
          mypage/
            widgets/  # /pages/mypage ã«ã‚ã‚‹ã‚¯ãƒ©ã‚¹ã‹ã‚‰ã—ã‹ä½¿ç”¨ã•ã‚Œãªã„Widget
            mypage.dart
            profile.dart
        resources/
        repository/
        router/  # ãƒšãƒ¼ã‚¸é·ç§»ã«é–¢ã™ã‚‹å‡¦ç†ãªã©
        service/
        utils/
        widgets/  # å…±é€šã®Widget
        main.dart  # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
```

### CI/CDã«ã¤ã„ã¦

CI ã§ã¯`Github Actoins` ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
push ã®åº¦ã«analyze ã‚„format ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
CD ã§ã¯`Codemagic` ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
ãƒ†ã‚¹ãƒˆç‰ˆã®é…å¸ƒã¯ iOS ã¯`TestFlight`ã€Android ã¯`Firebase App Distribution` ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
è¨­å®šãªã©ã«é–¢ã—ã¦ã¯ã“ã¡ã‚‰ã®è¨˜äº‹ã‚’ã”ç¢ºèªãã ã•ã„ã€‚

https://zenn.dev/0maru/articles/262c0f8ad52a0d#ci%2Fcd-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6

### PlatformView ã‚„MethodChannell ã«ã¤ã„ã¦

ä»Šå›ã®ã‚¢ãƒ—ãƒªã§ã¯å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ãƒã‚¤ãƒ†ã‚£ãƒ–ã®å‡¦ç†ã‚’å‘¼ã³å‡ºã™ã‚ˆã†ãªã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
è‡ªç¤¾ã®OAuthãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒã‚ã‚‹ã®ã§ãã‚Œã‚ˆã†ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ä½œæˆã—ã¾ã—ãŸãŒã€[`twitter_login`](https://github.com/0maru/twitter_login) ã®ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã„ã¾ã‚ã›ãŸã®ã§ã€ç‰¹ã«è€ƒãˆã‚‹ã“ã¨ã‚‚ãªãå®Ÿè£…ã§ãã¾ã—ãŸã€‚

å¼Šç¤¾ã®ä»–ã®ã‚¢ãƒ—ãƒªã§ã¯ãã“ãã“ã®ã‚µã‚¤ã‚ºã®ç”»åƒã‚’10æšã‹ã‚‰1000æšç¨‹åº¦Canvasã§å…¨ã¦ã®ãƒ”ã‚¯ã‚»ãƒ«ãŒç§»å‹•ã™ã‚‹ãã‚‰ã„ã«ç”»åƒã‚’åŠ å·¥ã—ã¦ã‹ã‚‰è¡¨ç¤ºã™ã‚‹ã¨ã„ã£ãŸæ©Ÿèƒ½è¦ä»¶ãŒã‚ã‚Šã¾ã—ãŸãŒã€ãã®éš›ã¯ãŸã‹ã ã‹ç”»åƒã§ã™ãŒPlatformView ã‚’ä½¿ã£ã¦ç”»åƒã‚’è¡¨ç¤ºã™ã‚‹æ–¹æ³•ã‚’å–ã‚Šã¾ã—ãŸã€‚

## ãã®ä»–è«¸ã€…


### æ±ºæ¸ˆæ–¹æ³•ã«ã¤ã„ã¦

ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ç´™ã®æ¼«ç”»ã‚’è²©å£²ã—ã¦ã„ã‚‹ãŸã‚ã‚¢ãƒ—ãƒªå†…èª²é‡‘ã§ã¯ãªãã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆã‚„AmazonPayã€auã‹ã‚“ãŸã‚“æ±ºæ¸ˆãªã©ã®æ”¯æ‰•ã„æ–¹æ³•ã‚’å°å…¥ã—ã¦ã„ã¾ã™ã€‚

[`pub.dev`](https://pub.dev/) ã§ã„ãã‚‰æ¢ã—ã¦ã‚‚ã€ä¸Šè¨˜ã®æ±ºæ¸ˆæ–¹æ³•ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯å‡ºã¦ã“ãªã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚ã“ã®è¨˜äº‹ã‚’æ›¸ãã«ã‚ãŸã£ã¦è»½ãæ¢ã—ã¦ã¿ã¾ã—ãŸãŒã€ç¾çŠ¶ã§ã¯ `Strip`, `ApplePay`, `GooglePay`, `BrainTree`ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãã‚‰ã„ã—ã‹è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
ã•ã‚‰ã«æ±ºæ¸ˆä»£è¡Œä¼šç¤¾ã‚’é–“ã«æŒŸã‚“ã§ã„ã‚‹ãŸã‚ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæä¾›ã•ã‚Œã¦ã„ãŸã¨ã—ã¦ã‚‚å¤§æŠµä½¿ç”¨å‡ºæ¥ã¾ã›ã‚“ã€‚

ã¾ãŸWebç‰ˆã§ã‚‚åŒã˜æ±ºæ¸ˆæ–¹æ³•ã‚’å°å…¥ã—ã¦ã„ã‚‹ãŸã‚ã€ã‚¢ãƒ—ãƒªã§ã¯SDKã‚’ä½¿ç”¨ã›ãšWebç‰ˆã¨åŒã˜Web APIã‚’ä½¿ç”¨ã—ãŸAPIãƒ™ãƒ¼ã‚¹ã§å®Ÿè£…ã—ãªã„ã¨ã„ã‘ãªã„ã¨ã„ã£ãŸæˆç´„ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚
SDKãŒä½¿ãˆãªã‹ã£ãŸã‚Šãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒãªã„ã¨ã„ã£ã¦ã‚‚ã€æ±ºæ¸ˆä»£è¡Œä¼šç¤¾ãŒæä¾›ã—ã¦ã„ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ²¿ã£ã¦å®Ÿè£…ã—ã¦ã„ãã ã‘ãªã®ã§ã‘ã—ã¦é›£ã—ã„ã¨ã„ã£ãŸã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚

é›£ã—ããªã‹ã£ãŸã¨ã„ã£ã¦ã‚‚å®Ÿè£…ã®æ®µéšã§æ‚©ã‚“ã ç‚¹ã¯ä½•ç‚¹ã‹ã‚ã‚Šã¾ã—ãŸã€‚
ä¾‹ãˆã°ã€Webç”¨ã®SDKã—ã‹æä¾›ã—ã¦ã„ãªã„æ±ºæ¸ˆæ–¹æ³•ã§JavaScript ã®SDK ã‚’ä»‹ã—ã¦ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã—æ±ºæ¸ˆã‚’é–‹å§‹ã—ãªã„ã¨è¡Œã‘ãªã„æ±ºæ¸ˆæ–¹æ³•ãŒã‚ã‚Šã€ãã®æ±ºæ¸ˆæ–¹æ³•ã§ã¯æ”¯æ‰•ã„ã«ä½¿ã†ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã‚„ãŠå±Šã‘å…ˆã‚’å¤‰æ›´ã™ã‚‹åº¦ã«JSã‚’å®Ÿè¡Œã—ã¦ã‹ã‚‰ã§ãªã„ã¨å¤‰æ›´ãŒã§ããªã„ã®ã§WebView ã‚’éƒ¨åˆ†çš„ã«åŸ‹ã‚è¾¼ã‚“ã ã‚ŠFlutterã‹ã‚‰JSã‚’å®Ÿè¡Œã•ã›ã‚‹ã¨ã„ã£ãŸå®Ÿè£…ãŒå¿…è¦ã«ãªã‚Šã¾ã—ãŸã€‚

ã‚‚ã†ä¸€ã¤æ‚©ã‚“ã ç‚¹ãŒã€ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆæ™‚ã®ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®ç™»éŒ²å‡¦ç†ã§ã™ã€‚ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆæ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã—ãŸã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ç•ªå·ã¯å¼Šç¤¾ã®ã‚µãƒ¼ãƒãƒ¼ã«é€ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“

ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ç•ªå·ã¯ã‚¢ãƒ—ãƒªå†…ã§RSAæš—å·ã§ãƒˆãƒ¼ã‚¯ãƒ³åŒ–ã—ã¦ã€ãã®ãƒˆãƒ¼ã‚¯ãƒ³ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’æ±ºæ¸ˆä»£è¡Œä¼šç¤¾ã«é€ã‚Šãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’ç™»éŒ²ã—ã¦ã‚‚ã‚‰ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ãƒˆãƒ¼ã‚¯ãƒ³åŒ–ã®éš›ã«å§‹ã‚ã¯[`encrypt`](https://pub.dev/packages/encrypt) ã ã‘ã‚’ä½¿ç”¨ã—ã¦ã„ãŸã®ã§ã™ãŒã€ãªãœã‹ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸã€‚

ãƒˆãƒ¼ã‚¯ãƒ³åŒ–ã•ã‚ŒãŸã‚‚ã®ã‚’è¦‹ãŸã¨ã“ã‚ã§ãªã«ãŒãªã‚“ã ã‹åˆ†ã‹ã‚‰ãªã„ã®ã§ã€æ±ºæ¸ˆä»£è¡Œä¼šç¤¾ãŒä½¿ç”¨ã—ã¦ã„ã‚‹éµã¨åŒç­‰ã®æ¡ä»¶ã§å…¬é–‹éµã¨ç§˜å¯†éµã‚’ä½œã‚Šãƒ‡ãƒãƒƒã‚°ã—ã¦ã„ã‚‹ã¨ã€`encrypt` ã§ã¯[`pointycastle`](https://pub.dev/packages/pointycastle) ã¨[`asn1lib`](https://pub.dev/packages/asn1lib) ãªã©ã«ä¾å­˜ã—ã¦ãŠã‚Šã€ä»Šã‚ã’ãŸï¼’ã¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¯åŒåã®ã‚¯ãƒ©ã‚¹ãŒå­˜åœ¨ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚
ãã®ã†ã¡ã®ç‰‡æ–¹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®åŒåã®ã‚¯ãƒ©ã‚¹ã§ã¯è€ƒæ…®æ¼ã‚Œãªã®ã‹ã€å®Ÿè£…æ¼ã‚Œãªã®ã‹æš—å·åŒ–ã«ã¤ã„ã¦è©³ã—ããªã„ã®ã§åˆ¤æ–­ã¤ãã¾ã›ã‚“ã§ã—ãŸãŒã€æ­£å¸¸ã«å‹•ã‹ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚
ã“ã®æ®µéšã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒä½¿ãˆãªããªã£ãŸã®ã§ã€`encrypt`ã®å‡¦ç†ã‚’ç¢ºèªã—ãªãŒã‚‰`pointycastle` ã¨`asn1lib`ã‚’ä½¿ã£ã¦æš—å·åŒ–å‡¦ç†ã‚’å®Ÿè£…ã™ã‚‹ã¨ã„ã†æš´æŒ™ã«å‡ºã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚

Dart ã«ã¯æš—å·åŒ–é–¢é€£ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ãªãã¦ã‚‚è‰¯ã„ã‚ˆã†ã«å……å®Ÿã•ã›ã¦ã»ã—ã„ã§ã™ã­ï¼


### freezed ã«ã¤ã„ã¦

freezed ã§ä½œæˆã—ãŸã‚¯ãƒ©ã‚¹ã«è¤‡æ•°ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’æŒãŸã›ãŸã„äº‹ãŒã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚
API ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§JSON ã‚’å—ã‘å–ã‚Šã€`fromJson` ã§ã‚¯ãƒ©ã‚¹ã«å¤‰æ›ã™ã‚‹éš›ã«ã€å¤‰æ›å¯¾è±¡ã®JSONã«
ã©ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã‚’åˆ¤åˆ¥ã§ãã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚‹å ´åˆã« `unionKey` ã‚’ä½¿ç”¨ã™ã‚‹ã¨JSON ã‹ã‚‰ä½¿ç”¨ã™ã‚‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’æ±ºå®šã—ã¦ã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ freezed ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰æŒã£ã¦ãã¾ã—ãŸã€‚
å¼Šç¤¾ã§ã¯Type ã§è¡¨ç¤ºã™ã‚‹Widget ã‚’æ±ºå®šã—ã¦ãŠã‚Šã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®å¤‰æ›´ã‚’ã™ã‚‹ã“ã¨ã§ã€ã‚¢ãƒ—ãƒªã®ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ã‚¬ãƒ©ãƒƒã¨å¤‰ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```json
{
  "contents": {
    "items": [
      {
        "runtimeType": "default",
        "a": "This JSON object will use constructor MyResponse()"
      },
      {
        "runtimeType": "special",
        "a": "This JSON object will use constructor MyResponse.special()",
        "b": 42
      },
      {
        "runtimeType": "error",
        "message": "This JSON object will use constructor MyResponse.error()"
      }
    ]
  }
}
```

```
@Freezed(unionKey: 'type', unionValueCase: FreezedUnionCase.pascal)
abstract class MyResponse with _$MyResponse {
  const factory MyResponse(String a) = MyResponseData;

  @FreezedUnionValue('SpecialCase')
  const factory MyResponse.special(String a, int b) = MyResponseSpecial;

  const factory MyResponse.error(String message) = MyResponseError;

  // ...
}
```

https://pub.dev/packages/freezed#fromjson---classes-with-multiple-constructors

ã‚ã‹ã‚Šã¾ã™ã‹ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
è¨€è‘‰ã§èª¬æ˜ã™ã‚‹ã“ã¨ã¯é›£ã—ã„ã®ã§æ™‚é–“ãŒã‚ã‚Œã°ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§ã‚‚ä½œã£ã¦è¦‹ãŸã„ã¨æ€ã„ã¾ã™ã€‚
ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒå¤‰ã‚ã‚‹ã®ã¯ã“ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚

```
1. ç”»åƒWidget
2. å•†å“ãƒªã‚¹ãƒˆ
3. ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒãƒŠãƒ¼
ã®é †ç•ªã§è¡¨ç¤ºã—ã¦ã„ãŸWidget ã‚’ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§
1. ç”»åƒWidget
2. ãŠçŸ¥ã‚‰ã›Widget
3. ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒãƒŠãƒ¼
4. å•†å“ãƒªã‚¹ãƒˆ
ã®é †ç•ªã§Widget ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
```


### ãƒšãƒ¼ã‚¸é·ç§»ã«ã¤ã„ã¦

ã‚¢ãƒ—ãƒªã¨Webã§åŒã˜API ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã§ä¾‹ãˆã°ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ç”¨ã®APIã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§ç”»åƒWidget ã‚’è¡¨ç¤ºã™ã‚‹ã‚‚ã®ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```json
{
  "image": "https://....jpg",
  "url": "/campaign/12332/",
  "description": "ç”»åƒã§ã™",
}
```

ç”»åƒã‚’è¡¨ç¤ºã—ã¦ã‚¿ãƒƒãƒ—ã•ã‚ŒãŸéš›ã«`url` ã®ãƒšãƒ¼ã‚¸ã«é·ç§»ã•ã›ãŸã„å ´åˆã«ã€Webã§ã¯ç›¸å¯¾ãƒ‘ã‚¹ã¨ã—ã¦ãªã‚“ãªãå‡¦ç†å‡ºæ¥ã¾ã™ãŒFlutter ã§ã¯ãã†ã¯ã„ãã¾ã›ã‚“ã€‚
æ¤œç´¢ãªã©ã§ã¯URLã«ã‚¯ã‚¨ãƒªãŒä»˜åŠ ã•ã‚Œã¦ã„ã¦`/search/q=é¬¼æ»…ã®åˆƒ&category=1&sort=price-desc&page=1`ã®ã‚ˆã†ãªURLã‚‚å‡¦ç†ã™ã‚‹å¿…è¦ã‚‚ã‚ã‚Šã¾ã™ã€‚
ã•ã‚‰ã«ã€`Navigator (1.0)`ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã§ä¸‹è¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ãƒšãƒ¼ã‚¸é·ç§»ã™ã‚‹å¿…è¦ã‚ã‚Šã¾ã™ã€‚

```dart
Navigator.of(context).push(
  MaterialPageRouter(
    builder: (context) {
      return CampaignPage();
    },
  ),
);
```

`/campaign/12332/` ã‚’ã©ã®ã‚ˆã†ã«å‡¦ç†ã—ã¦ã„ã‚‹ã‹ã¨ã„ã†ã¨[`named routes`](https://docs.flutter.dev/cookbook/navigation/named-routes) ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
[`MaterialApp`](https://api.flutter.dev/flutter/material/MaterialApp-class.html) ã®[`onGenerateRoute`](https://api.flutter.dev/flutter/material/MaterialApp/onGenerateRoute.html) ã«URLã‚’æ­£è¦è¡¨ç¾ã§ãƒšãƒ¼ã‚¸ã®ãƒ‘ã‚¹ã¨ãƒãƒƒãƒã™ã‚‹ã‹ã‚’ç¢ºèªã—ã€ãƒãƒƒãƒã—ãŸéš›ã«é·ç§»ã™ã‚‹ãƒšãƒ¼ã‚¸ã‚¯ãƒ©ã‚¹ã®æ±ºå®šã¨ã‚¯ã‚¨ãƒªã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦arguments ã«å¤‰æ›ã—ã¦ `Rotuer`ã‚¯ãƒ©ã‚¹ã‚’è¿”ã™å‡¦ç†ã‚’æ›¸ã„ã¦ã„ã¾ã™ã€‚

ã“ã®ã‚ˆã†ãªå‡¦ç†æ–¹æ³•ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€if ã®æ¡ä»¶åˆ†å²ã§é·ç§»å…ˆã‚’å¤‰ãˆã‚‹å¿…è¦ãŒãªã‹ã£ãŸã‚Šã€API ã‹ã‚‰è¿”ã£ã¦ãã‚‹ãƒªãƒ³ã‚¯å…ˆãŒå¤‰ã‚ã£ãŸã¨ã—ã¦ã‚‚ã‚¢ãƒ—ãƒªã®ä¿®æ­£ãƒ»ãƒªãƒªãƒ¼ã‚¹ç„¡ã—ã§å®Ÿè£…æ¸ˆã¿ã®ãƒšãƒ¼ã‚¸ã®å ´åˆå¥½ããªã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

#### å®Ÿè£…ä¾‹

é·ç§»ã®éš›ã¯`pushNamed` ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
`pushNamed` ã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹éš›ã«`arguments` ã«ãªã«ã‹ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
`MaterialApp.onGenerateRoute` ã§ã‚¯ã‚¨ãƒªãªã©ãŒé·ç§»å…ˆã®ã‚¯ãƒ©ã‚¹ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«æ¸¡ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```dart
Navigator.of(context).pushNamed('/campaign/12332/');

Navigator.of(context).pushNamed('/search/q=é¬¼æ»…ã®åˆƒ&category=1&sort=price-desc&page=1');
```

ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒšãƒ¼ã‚¸ã‚¯ãƒ©ã‚¹ã§ã¯é·ç§»ã™ã‚‹éš›ã®ãƒ‘ã‚¹ï¼ˆURLï¼‰ã¨ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã®IDã‚’å—ã‘å–ã‚‹ã‚ˆã†ã®ã‚¯ãƒ©ã‚¹å¤‰æ•°ã«id ãŒã‚ã‚Šã€path ã® `:id` ã«ã‚ã‚‹ã‚‚ã®ãŒã‚¯ãƒ©ã‚¹å¤‰æ•°ã®`id` æ¸¡ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```dart
class CampaignPage extends StatelessWidget {
  const CampaignPage({Key? key, required this.id}) : super(key: key);

  const String path = '/campaign/:id/';

  final String id;
  ...
}
```

### Dart SDK ã«ã¤ã„ã¦
Flutter ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’è¡Œã†æ–¹ã¯å¤šã„ã¨æ€ã„ã¾ã™ãŒã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã—ã¦ã„ã‚‹Dart SDK ã‚’æ›´æ–°ã—ã¦ã„ã‚‹æ–¹ã¯å°‘ãªã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿï¼Ÿ
ã¤ã„å…ˆæ—¥Flutter 2.8 ã®ãƒªãƒªãƒ¼ã‚¹ãŒã‚ã‚Šãã®éš›ã«Dart 2.15 ã‚‚ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸãŒã€çš†ã•ã‚“ã¯ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ¸ˆã¿ã§ã™ã‹ï¼Ÿ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã™ã‚‹Dart SDK ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ã«ã¤ã„ã¦æ›¸ã‹ã‚Œã¦ã„ã‚‹ãƒšãƒ¼ã‚¸ã‚’è¦‹ãŸè¨˜æ†¶ã‚‚ç„¡ã„ã§ã™ã—ã€ç§ãŒçŸ¥ã‚‹é™ã‚Šã§ã¯`pubspec.yaml` ã®SDK ã®é …ç›®ã¯update ã®ã‚³ãƒãƒ³ãƒ‰ãªã©ã§ã¯è‡ªå‹•çš„ã«æ›´æ–°ã•ã‚Œãªã„ã¨èªè­˜ã—ã¦ã„ã¾ã™ã€‚
ã¾ãç§ãŒSDK ã®æ›´æ–°ã«æ°—ãŒã¤ã„ãŸã®ã‚‚Flutter ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯ã—ãŸã‘ã©ã‚¿ã‚¤ãƒ—ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãŒä½¿ãˆãªã„ãªãƒ¼ã¨ã®ã“ã¨ã§æ°—ãŒã¤ã„ãŸã§ã®ã€çŸ¥ã‚‰ãªã„äººãŒå¤šã„ã®ã§ã¯ã¨æ€ã£ã¦ã„ã¾ã™ã€‚

æ›´æ–°ã—ãŸã„å ´åˆã¯`pubspec.yaml` ã‚’é–‹ã„ã¦ã€enviroment.sdk ã®é …ç›®ã‚’æ›´æ–°ã—ã¦ãã ã•ã„ã€‚
Stable ãƒãƒ£ãƒ³ãƒãƒ«ã®æœ€æ–°ç‰ˆã¯`Dart2.15.1` ã§ã™ã€‚

```diff:pubspec.yaml
name: flutter new app.
description: A new Flutter project.
version: 1.0.0+1

environment:
-  sdk: ">=2.12.0 <3.0.0"
+  sdk: ">=2.15.0 <3.0.0"
```

ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚ã‹ã‚‰ãªã„å ´åˆã¯ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªãŒã§ãã¾ã™ã€‚

```
$ dart --version
```

# ã¾ã¨ã‚

å¼Šç¤¾ã§æ–°è¦é–‹ç™ºã—ãŸã‚¢ãƒ—ãƒªã«ã¤ã„ã¦ãŠè©±ã—ã¦ãã¾ã—ãŸã€‚
æ½¤æ²¢ãªé–‹ç™ºãƒªã‚½ãƒ¼ã‚¹ãŒç„¡ã„ä¸­ã§iOS, Android ã®ä¸¡OSã«å‘ã‘ã¦ã‚¢ãƒ—ãƒªã‚’ãƒªãƒªãƒ¼ã‚¹ã§ããŸã®ã¯ã€ç¢ºå®Ÿã«Flutter ã®ãŠã‹ã’ã ã¨æ€ã„ã¾ã™ã€‚
3Dã‚²ãƒ¼ãƒ ã‚„ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’ä½¿ã£ã¦ç”»åƒã‚’ã‚´ãƒªã‚´ãƒªã«åŠ å·¥ã—ãŸã‚Šã€ARã‚’ä½¿ã£ãŸã‚Šã—ãªã„å ´åˆã‚„æ½¤æ²¢ãªé–‹ç™ºãƒªã‚½ãƒ¼ã‚¹ãŒç„¡ã„å ´åˆã«ã¯Flutter ã‚’é¸æŠã™ã‚‹ã“ã¨ã¯å€‹äººçš„ã«ã¯è‰¯ã„åˆ¤æ–­ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
ç‰¹ã«Android ã®å ´åˆiOS ã¨é•ã„UIã«é–¢ã—ã¦ã‚‚ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«æ²¿ã£ãŸUIã«ã™ã‚‹ã“ã¨ã‚‚å®¹æ˜“ãªã®ã§Android ã ã‘Flutter ã§é–‹ç™ºã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã“ã‚Œã¾ã§æ‹™ã„æ–‡ç« ã‚’èª­ã‚“ã§é ‚ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚
Flutter ã®ã‚¢ãƒ—ãƒªé–‹ç™ºã§æ‚©ã‚“ã§ã„ã‚‹æ–¹ã€Flutter ã‚’æ¡ç”¨ã—ã‚ˆã†ã‹æ‚©ã‚“ã§ã„ã‚‹æ–¹ã®å‚è€ƒã«ãªã‚Œã‚Œã°å¹¸ã„ã§ã™ã€‚


ã“ã®è¨˜äº‹ã¯GitHub ã§ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚
Typo ãªã©ã‚’è¦‹ã¤ã‘ãŸæ–¹ã¯ä¸‹è¨˜ã®ãƒªãƒã‚¸ãƒˆãƒªã«Pull Request ã‹Issues ã‚’ä½œã£ã¦é ‚ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ã€‚

https://github.com/0maru/zenn-contents
